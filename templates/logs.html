{% extends "layout-admin.html" %}
{% block headScripts%}
<link rel="stylesheet" href="static/vendor/datatables.net-bs4/css/dataTables.bootstrap4.min.css">
<link rel="stylesheet" href="static/vendor/datatables.net-buttons-bs4/css/buttons.bootstrap4.min.css">
<link rel="stylesheet" href="static/vendor/datatables.net-select-bs4/css/select.bootstrap4.min.css">
<style>
    .custom-form-control{
        border: 0;
        font-size: .875rem;
        height:calc(1.5em + 1.25rem + 5px);
        font-weight: 400;
        line-height: 1.5;
        display: block;
        width: 100%;
        border-radius: .25rem;
        background-color: #3b547c;
        background-clip: padding-box;
        color: #fff;
    }
    .custom-form-control:focus, .custom-form-control:active, .custom-form-control:focus-visible{
        border: 0;
        font-size: .875rem;
        height:calc(1.5em + 1.25rem + 5px);
        font-weight: 400;
        line-height: 1.5;
        display: block;
        width: 100%;
        border-radius: .25rem;
        background-color: #3b547c;
        background-clip: padding-box;
        color: #fff;
        outline: none;
    }
    .custom-form-control::placeholder{
        color: lightgray !important;
    }
    .bg-lightdefault{
        background-color: #3b547c;
        border-color: #172b4d !important;
    }
    .custom-field-set{
        height: 51px;
        overflow:hidden;
    }
    .custom-field-set .col-3{
        text-align: right;
    }
    .dataTables_wrapper {
        width: 100%;
        margin-top: 2rem;
    }

</style>
{% endblock %}
{% block body %}
<!-- Header -->
<div class="header bg-primary pb-6">
    <div class="container-fluid">
        <div class="header-body">
            <div class="row align-items-center py-4">
                <div class="col-lg-6 col-7">
                    <h6 class="h2 text-white d-inline-block mb-0">Logs</h6>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Page content -->
<div class="container-fluid mt--6">
<div class="row">
    <div class="col-xl-12">
        <div class="card">
            <div class="card-header border-0" id="lead-import-card">
                <div class="row align-items-center">
                    <div class="col">
                        <h3 class="mb-0">Logs</h3>
                        <hr>
                    </div>
                </div>
                <div class="card-body">
                    <div id="logs-loading" style="display: none;">
                        <center>
                            <img src="/static/img/spinner.svg" width="100px">
                            <i>Loading Logs</i>
                        </center>
                    </div>
                    <div class="row justify-content-center" id="logs-body" style="display: none; text-align: left;">
                        <div class="row col-12">
                            <div class="col-3">
                                <label for="users-id">User:</label>
                                <select id="users-id" name="users-id" class="form-control">
                                    <option value="none">Select a user</option>
                                    <option v-for="user in users" v-bind:value="user.id">[[ user.email ]]</option>
                                </select>
                            </div>
                            <div class="col-3">
                                <label for="from-date">From:</label>
                                <input class="form-control" id="from-date" type="datetime-local">
                            </div>
                            <div class="col-3">
                                <label for="to-date">To:</label>
                                <input class="form-control" id="to-date" type="datetime-local">
                            </div>
                            <div class="col-3">
                                <br>
                                <a href="#" class="btn btn-primary mt-2" id="submit-logs">Search</a>
                            </div>
                        </div>
                        <table class="table table-flush mt-4" style="text-align: left;" id="log-table">
                            <thead>
                                <th>LogID</th>
                                <th>First Name</th>
                                <th>Last Name</th>
                                <th>Email</th>
                                <th>Location</th>
                                <th>Type</th>
                                <th>Created_At</th>
                                <th>Action</th>
                            </thead>
                            <tbody>
                                <tr v-for="log in logs">
                                    <td>[[ log.id ]]</td>
                                    <td>[[ returnDash(log.first_name) ]]</td>
                                    <td>[[ returnDash(log.last_name) ]]</td>
                                    <td>[[ returnDash(log.email) ]]</td>
                                    <td>[[ returnDash(log.location) ]]</td>
                                    <td>[[ returnDash(log.action) ]]</td>
                                    <td>[[ formatDateTime(log.created_at) ]]</td>
                                    <td>
                                        <a href="#log-view" class="sidebar-toggle btn btn-info btn-icon icon-left log-view" v-bind:log-id="log.id" data-toggle="tooltip" data-original-title="Edit"><i class="fa fa-eye" aria-hidden="true"></i></a>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="sidebar-modal" id="log-view">
    <div class="sidebar-transparent"></div>
    <div class="sidebar-content bg-white shadow shadow-lg p-4">
        <div class="sidebar-header">
            <div id="logs-view-loading" >
                <center>
                    <img src="/static/img/spinner.svg"width="100px">
                    <p>Loading Log Details...</p>
                </center>
            </div>
            <div id="logs-view-body">
                <b class="mt-4">Log Details</b>
                <hr>
                <div class="row">
                    <div class="col-12" v-for="(value, name) in details">
                        <span v-if="name !== 'query'">
                            <small>[[ name ]]</small>
                            <input type="text" class="form-control" placeholder="" id="" v-bind:value="value" disabled><br>
                        </span>
                        <span v-else>
                            <b class="mt-4">Log Query</b><br>
                            <hr>                    
                            <div class="rounded bg-default p-3 text-white">
                                <code>
                                    [[value]]
                                </code>
                            </div>
                        </span>
                    </div>
                </div>
            <hr>
            </div>
            <div class="row justify-content-center">
                <a href="#" id="edit-company" class="btn btn-success">Save Campaign</a>
            </div>
        </div>
    </div>
</div>
{% endblock %}
{% block scripts %}
<script src="static/vendor/datatables.net/js/jquery.dataTables.min.js"></script>
<script src="static/vendor/datatables.net-bs4/js/dataTables.bootstrap4.min.js"></script>
<script src="static/vendor/datatables.net-buttons/js/dataTables.buttons.min.js"></script>
<script src="static/vendor/datatables.net-buttons-bs4/js/buttons.bootstrap4.min.js"></script>
<script src="static/vendor/datatables.net-buttons/js/buttons.html5.min.js"></script>
<script src="static/vendor/datatables.net-buttons/js/buttons.flash.min.js"></script>
<script src="static/vendor/datatables.net-buttons/js/buttons.print.min.js"></script>
<script src="static/vendor/datatables.net-select/js/dataTables.select.min.js"></script>
<script src="static/js/vueJS/logs.js?v=1.3.11.1"></script>
{% endblock %}